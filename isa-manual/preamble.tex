% -*- mode: latex; tab-width: 2; indent-tabs-mode: nil; -*-
%------------------------------------------------------------------------------
% MRISC32 ISA Manual - Document preamble (package includes, commands etc).
%
% This work is licensed under the Creative Commons Attribution-ShareAlike 4.0
% International License. To view a copy of this license, visit
% http://creativecommons.org/licenses/by-sa/4.0/ or send a letter to
% Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
%------------------------------------------------------------------------------

% Package includes.

\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage[export]{adjustbox}
\usepackage{geometry}
\usepackage[svgnames]{xcolor}
\usepackage[endianness=big]{bytefield}
\usepackage[colorlinks,citecolor=Navy,linkcolor=Navy,pdftex]{hyperref}
\usepackage{listings}
\usepackage{ltablex}
\usepackage{booktabs}
\usepackage{mdframed}
\usepackage{amssymb}

% Set up PDF document properties.

\hypersetup{
  pdftitle = {MRISC32 Instruction Set Manual},
  pdfauthor = {Marcus Geelnard}
}

% Setup style.

\renewcommand{\familydefault}{\sfdefault}

\setlength{\topmargin}{-0.5in}
\setlength{\textheight}{9in}
\setlength{\oddsidemargin}{0in}
\setlength{\evensidemargin}{0in}
\setlength{\textwidth}{6.5in}

\pagestyle{myheadings}
\setlength{\parindent}{0in}
\setlength{\parskip}{10pt}
\sloppy
\raggedbottom
\clubpenalty=10000
\widowpenalty=10000

% Setup common bytefield options (optimized for 32-bit words).

\bytefieldsetup{
  boxformatting={\centering\footnotesize},
  bitwidth=14pt,
  rightcurly=.,
  rightcurlyspace=-1pt
}

% Setup common lstlisting options for pseudo code.

\lstdefinestyle{pseudocode}{
  basicstyle=\ttfamily\small,
  mathescape=true,
  literate=
         {=}{$\leftarrow{}$}{1}
         {==}{$={}$}{1}
         {<=}{$\leq$}{1}
         {>=}{$\geq$}{1}
         {!}{$\neg$}{1}
         {!=}{$\neq$}{1}
         {||}{$\vee$}{1}
         {\&\&}{$\wedge$}{1}
         {*}{$\times$}{1}
         {>>s}{>>{$_{s}$}}{2}
         {<<s}{<<{$_{s}$}}{2}
         {_2}{{$_{2}$}}{1}
         {_10}{{$_{10}$}}{1}
         {_16}{{$_{16}$}}{1}
}


% Setup common lstlisting options for assembler.

\lstdefinestyle{assembler}{
  basicstyle=\ttfamily\footnotesize
}

% Create an itemize environment with custom formatting.

\newenvironment{bulletitems}
{\begin{itemize}
  \setlength{\itemsep}{0pt}
  \setlength{\parskip}{0pt}
  \setlength{\parsep}{0pt}}
{\end{itemize}}

% Useful commands.

\definecolor{infocol}{rgb}{0.3,0.3,0.7}
\definecolor{warncol}{rgb}{0.7,0,0}

\newmdenv[
  fontcolor=darkgray,
  linewidth=1.2pt,
  topline=false,
  bottomline=false,
  rightline=false,
  skipabove=\topsep,
  skipbelow=\topsep
]{mymdenv}

\newenvironment{infobox}[1]
{\begin{mymdenv}[linecolor=infocol]\noindent\textcolor{infocol}{\textbf{#1}}\par}
{\end{mymdenv}}

\newenvironment{warnbox}[1]
{\begin{mymdenv}[linecolor=warncol]\noindent\textcolor{warncol}{\textbf{#1}}\par\begin{itshape}}
{\end{itshape}\end{mymdenv}}

\newenvironment{notebox}
{\begin{infobox}{Note}}
{\end{infobox}}

\newenvironment{todobox}
{\begin{warnbox}{TODO}}
{\end{warnbox}}

\newcommand{\tbd}{{\textbf{\textcolor{warncol}{TBD}}}}
\newcommand{\todo}[1]{{\begin{todobox}#1\end{todobox}}}
